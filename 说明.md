虚幻引擎目录E:\UE\UE_5.6\Engine
只允许修改目录C:\Users\xiaonan\Desktop\chajiankaifa\BlueprintProfiler
只修改代码和说明，我会自己测试

# 当前状态和限制

## 已修复的问题
1. 修复了 `TickUIRefresh` 函数签名（添加 `float DeltaTime` 参数）
2. 修复了 `FTSTicker::GetCoreTicker()` 调用
3. 修复了头文件包含（`Containers/Ticker.h`）
4. 添加了 PIE 结束事件绑定，确保自动停止时刷新数据
5. 移除了追踪点设置（会导致 UI 卡顿）
6. 移除了所有调试日志（减少日志刷屏）
7. **修复了静态扫描孤立节点检测逻辑**：
   - **纯节点检测**：只有当数据输出引脚未连接时才报告，但跳过特殊节点：
     - 变更路线节点（Set Return Value）
     - 字面量和常量节点
     - 工具节点（Make, Select, Branch, Break, Append 等）
   - **执行节点检测**：只有当执行引脚完全未连接（既没有输入连接也没有输出连接）时才报告，但跳过：
     - Event 和 CustomEvent 节点（入口节点）
     - 构造脚本节点（Construction Script）
     - 输入相关节点（Thumbstick, Touch, Input Action, Input Axis, Enhanced Input 等）
   - **会正确检测到**：
     - 完全未连接的孤立节点（如未连接的打印字符串节点）
8. **修复了按钮功能**：
   - **清除数据按钮**（原"刷新"按钮）：清除所有显示的数据（运行时数据、静态扫描数据、会话历史）
   - **扫描文件夹按钮**：添加了文件夹选择对话框，自动将文件系统路径转换为虚幻引擎资产路径
   - **清除筛选按钮**：重置搜索文本、筛选器和排序选项
   - **清除历史按钮**：清除会话历史并刷新 UI
   - **重置按钮**：重置运行时数据（功能已正常）
9. **修复了 UE 5.6 编译兼容性**：
   - 修复了 `OpenDirectoryDialog` 函数签名变化（从 `TArray<FString>` 改为 `FString`）
   - 修复了 const 正确性问题

## 按钮功能说明
- **开始**：开始录制运行时数据
- **暂停**：暂停录制
- **继续**：继续录制
- **停止**：停止录制
- **重置**：重置运行时数据
- **保存会话**：保存当前会话数据到文件（自动保存到 Saved 目录）
- **加载会话**：从文件加载会话数据（自动从 Saved 目录加载最近的会话）
- **清除历史**：清除所有会话历史
- **扫描项目**：扫描整个项目的蓝图
- **扫描文件夹**：选择特定文件夹进行扫描（弹出文件夹选择对话框，UE 5.6 只支持选择单个文件夹）
- **取消扫描**：取消当前扫描
- **清除数据**：清除所有显示的数据
- **清除**（搜索栏旁）：清除搜索和筛选条件

## 重要限制

**此性能分析器主要用于 PIE (Play In Editor) 模式下的蓝图节点执行分析。**

在编辑器模式下（非 PIE）点击"开始录制"不会有任何数据，因为：
1. 没有蓝图在运行
2. `OnScriptProfilingEvent` 回调不会被触发
3. 追踪点机制已被移除（会导致 UI 卡顿）

## 使用方法
1. 打开 Blueprint Profiler 窗口
2. 启用"PIE 自动开始"选项
3. 点击 PIE 按钮运行游戏
4. Profiler 会自动开始录制
5. 结束 PIE 时会自动停止并显示数据

## 静态扫描使用方法
1. 打开 Blueprint Profiler 窗口
2. 点击"扫描项目"按钮进行全项目静态分析
3. 或点击"扫描文件夹"选择特定文件夹进行分析
4. 扫描完成后会显示孤立节点等问题

## 最近修改记录（2025-02-05）
- 修复了所有按钮功能
- 修复了静态扫描孤立节点检测逻辑
- 修复了 UE 5.6 编译兼容性问题
- 移除了所有调试日志

## 编译状态
✅ 已通过 UE 5.6 编译
